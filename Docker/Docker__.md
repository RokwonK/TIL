# Docker란 무엇인가?

데브옵스에서 중요한 컨테이너와 기술 중 컨테이너!

다양한 클라우드 서비스에서 공식적으로 지원
복잡한 리눅스를 컨테이너로 묶어서 실행 가능!
개발 테스트 서비스를 하나로 묶어서 효율적!

도커허브를 통해서 공유가능함

컨테이너란? - 가상화라는 기술을 이해 // 가상화보다 더 경량하된 기능

가상화 - 컴퓨터 안에서 컴퓨터를 만든 것
서버에 가상머신을 생성해 좀 더 많은 일들을 효율적으로 !


가상머신을 생성하면 이미지를 여러 서버에 설치함 
가상 서버를 만들어 

웹포스팅 = 실제 물리적인 서버를 공유
클라우드 서비스 = 각각의 독립적인 가상화 기술을 이요하여 가상 머신안에 독립 적으로 돌아가게 하는 서비스

물리적 서버안에 또다른 가상머신을 생성해서 성능이 떨어짐
cpu안에 가상화 기능 넣음 - 퍼포먼스 문제

Post와 커널을 공유하는 반가상화 기능이 등장
그래도 가상머신은 완전한 컴퓨터임 - 각각의 독립적인 운영체제를 설치해야함

컨테이너 안에 가상 공간 만듬 실행파일을 호스트에서 직접 실행
격리에 가까운 기술을 사용




게스트 OS를 별도로 설치X
즉, 라이브러리만!

하드웨어 가상화계층이 없음
메모리 접근, 네트워크 이용이 월등히 빠름
도커는 운용과 서버관리에 크게 편리함 - 데브웁스

도커 이미지 - 도커 허브 자동화 가능 개발과 서버운용에 유용
이미지와 컨테이너?
이미지 = 서비스에 서버 프로그램 소스코드 컴파일된
컨테이너는 이미지를 실행한 상태
이미지로 여러개의 컨테이너 실행가능
이미지는 실행파일 컨테이너는 프로세스라고 볼 수 있음

각 이미지는 의존관계

물리적인 서버를 직접 구현해 왔지만
막대한 비용및 시간과 인력 부담

가상 서버가 실행한 만큼만 사용
코드로서 자동화 됨

> sodup brew update  
sudo brew install docker.io  
docker version  
systemctl enable docker - docker 활성화
systnemctl start docker - 컴(OS)키면 알아서 활성화


## 도커 사용범  
도커는 이미지파일 기반
모두 관리가 권한이 필요함
도커이미지 - 도커허브에서 가져온다
        - docker search 관련검색어(node)
        - docker pull 이미지이름             pull request - 코드 받기 
        - docker node images => 태그다른 이미지들을 출력
        - docker run --name 이미지이름 -d(백그라운드 모드로 실행) -it(터미널 입력을 위한 옵션) 이미지 (실행할 장소 ex /bin/bash)

        - ps -a(현재 실행중인 모든 컨테이너 보여줌)
        - docker stop 컨테이너아이디(ps -a로 확인가능)
        - 


## 도커 이미지 생성 - 실행

컨테이너화 - 
npm init ~~~express 설치
도커파일 만들기

vscode에 docker확장팩 설치하기

----------------------------------------------
(파일만들기)touch Dockerfile
DSL (Domain - Specific - Languages) 사용 도메인 특화 언어 사용함

FROM node:버전 - 어디서불러온다
WORKDIR /user/src/app - 경로

COPY paakage.json ./
RUN npm install

COPY . .

EXPOSE 8080 - 포트를 외부에서 접근할 수 있도록 포트를 오픈
CMD ["node","server.js"] => node server.js

----------------------------------------------------

docker build -t(target) app .
=> 이미지가 빌드됨

docker run -p 8000:8000(port) -d app

sudo docker ps -a - 실행중인 docker 컨테이너
sudo docker stop 컨테이너아이디

도커 파일에 내부의 쉘로 접근
1. 도커 실행 시키고
브라우저로 들어가서 확인해보면 됨

실행중인 터미널(쉘)로 접근

sudo docker exec -it 컨테이너아이디 /bin/bash(bash 쉘 이용)
실행중인 도커 파일에 접근함
