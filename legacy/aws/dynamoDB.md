# DynamoDB  

- 완전 관리형 DB  
- 다중 AZ 간에 복제되므로 가용성이 높다.
- 클라우드 네이티브로 AWS 독점이다
- NoSQL 하지만 트랜잭션 지원 기능이 있음  
- 데이터베이스가 내부에서 나눠져있어 방대한 워크로드로의 확장이 가능하다.  
- 초당 수백만개 요청을 처리, 수조개의 행, 수백 TB의 스토리지를 갖는다.  
- 성능은 한 자릿수 밀리초이며 일관성도 높다.  
- 보안과 관련된 모든 기능이 IAM과 통합되어 있다.  
- 적은 비용이 들면 오토 스케일링 기능이 있음
- 두가지의 클래스로 나뉨 - 액세스가 빈번한 Standard, 그렇지 않은 IA  

<br />  

### 테이블 관련
- 테이블로 구성되며 데이터베이스를 생성할 필요없음.(이미 데이터베이스가 존재)  
- 테이블을 생성하면 각 테이블에 기본 키가 부여됨(기본키는 생성시 결정)  
- 행(여러 항목을 가짐)은 갯수 제한 없음
- 각 항목은 속성을 가지며 속성은 열에 표시됨(이후 추가 가능, null 가능)  
  - RDS는 복잡하지만 DynamoDB는 간편함
- 각 항목당 최대 400KB
스키마를 빠르게 구성해야할때 RDS보다 효율적임!  

<br />  

### Read/Write 용량 모드  
- 프로비저닝 모드(default)
  - 미리 용량을 프로비저닝
  - 지정된 RCU(Read Capacity Units)와 WCU로 지불함
  - 비용 절감을 원할때 좋음
- 온디맨드 모드
  - 읽기/쓰기 용량이 워크로드에 따라 자동 확장됨
  - 워크로드를 예측할 수 없거나 급격히 트래픽이 증가하는 경우 유용하게 사용할 수 있음

<br />  

## DynamoDB 고급기능  

### DynamoDB Accelerator  
- 고가용성의 완전 관리형 인메모리 캐시  
- 읽기 작업이 많을때 DAX 클러스터 생성 캐시 데이터로 혼잡을 처리  
- 캐시 데이터에 대한 접근은 ms 수준의 시간이 듬
- 기존 DynamoDB API와 호환    
  client -> DAX cluster(has Nodes) -> DynamoDB
- TTL은 기본 5분  

<br />  

### Stream Processing
- 테이블의 모든 수정사항에 대한 스트림을 생성할 수 있다.  
- 환영 이메일, 변경사항에 실시간 대응
- 사용 분석, 파생 테이블, 리전간 복제 실행, 람사 실행 등
- DynamoDB Streams
  - 24시간 보존
  - 소비자 수 제한
  - 람다와 함께 사용하기 좋음
- Kinesis Data Streams
  - 보존 기간 1년
  - 더 많은 소비자수
  - 데이터 처리방법이 더 많음  

<br />  

### Global Tables  
- 여러 리전 간에 복제가 가능한 테이블  
- 양방향 복제 가능  
- 짧은 시간에 액세스
- 사용하기 위해선 DynamoDB Streams가 필수조건  

<br />  

### Time To Live(TTL)  
- 시간이 지나면 자동으로 항목 삭제  
- 속성에 ExpTime이 있음 지나면 삭제됨  
- 웹 세션 핸드링  

<br />  

### Backups for disaster recovery  
- 지정 시간 복구(PITR)을 사용하여 지속적인 백업이 가능  
  - 35일 전까지 가능
  - 복구를 할 경우 새로운 테이블이 생성됨  
- On-demand backups
  - 직접 삭제할때까지 계속 보존
  - 성능이나 지연 시간에 영향을 주지 않음
  - 복구를 진행하면 새로운 테이블이 생성됨