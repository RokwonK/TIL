---
title: EC2
author: 김록원
date: 2022.12.26
category: AWS
---

# AWS EC2  
AWS 서비스를 이용하면서 가장 먼저 접하고 가장 많이 사용하는 서비스가 바로 EC2가 아닐까 싶다. 일반적으로 서버를 운용하기 위해 사용하지만 목적에 따라 많은 사양을 가지고 있고 상황에 따라 비용도 최소화 시킬 수 있는 방법도 제공해준다. EC2와 EC2와 열결되어 있는 여러 기능들에 대해 살펴보자  

<br />  

> **💡 EC2란?**  
Elastic Computed Cloud의 약자.  
AWS에 제공해주는 IaaS로 물리적인 하드웨어에 존재하는 Virtual Machine이다.  
가상 드라이브인 EBS, 트래픽 분산기능인 ELB, 스케일아웃을 위한 기능인 Auto Scaling Group 등과 함께 사용할 수 있다.  
또한 AWS의 수많은 관리형 서비스들은 EC2를 기반으로 만들어졌다.  

<br />

## EC2 기본개념
EC2를 운용하기 위해서 필요한 기본 개념들이 존재한다.  
결국은 하나의 하드웨어를 운용하는 것이기 때문에 관련된 셋팅을 EC2를 대여하는 주체가 설정할 수가 있다. 물론 좋은 사양을 선택할수록 비용도 상승할 것이다.  

<br />  

### EC2의 사양 선택  
EC2를 구성하기 위해서 여러 선택사항들이 존재한다.  
- `OS` : Linux, Window, Mac 중 선택 가능
- `CPU` : Compute power & cores 선택 가능
- `RAM` : RAM의 크기 선택 가능
- `Storage`
  - EBS & EFS : Network-attached
  - EC2 Instance Store : hardware
- `방화벽 규칙 설정` : security group
- `Bootstrap script(시작 시 초기 설정)` : EC2 User Data

<br />  

### EC2 User Data
EC2 User Data란 EC2 인스턴스 실행 시 작동시킬 스크립트이다.  
EC2가 처음 실행될때 한 번만 실행된다.(bootstrapping)  
- 부팅작업을 자동화히기 위해서 사용한다.
- 소프트웨어 설치, 업데이트, 인터넷에서 파일 다운로드와 같은 작업을 할 수 있다.
- 참고로 User Data는 루트 계정에서 실행된다. 즉 `sudo` 명령어를 꼭 붙여야한다.  

EC2 인스턴스를 만들때 Advanced Detail 섹션에서 확인할 수 있다.
![User Data](https://user-images.githubusercontent.com/52196792/209640103-2f639462-8d00-45f9-9833-e147eef6908d.png)

<br />  

### EC2 Instance type  
인스턴스 타입의 이름에는 규칙이 있다.
`m5.2xlarge` 보통 이런 형식으로 각 자리가 의미를 가진다.  
`{instance class}{generation}.{instance class size}`  

`generation` : AWS 하드웨어가 계속 개선되고 있어서 새로운 세대의 하드웨어가 출시되면 버전없이 됨  
`instance class size` : size가 클 수록 더 많은 메모리와 CPU를 가짐  

<br />  

EC2는 목적에 따라 타입이 나뉜다. instance class는 목적과 관련이 깊다.  
**`General Purpose`**  
- 웹서버나 코드 저장소의 용도 등으로 사용
- 컴퓨팅 파워, 메모리, 네트워크 간의 균형이 잘 맞음  

<br />

**`Compute Optimized`**  
- 높은 수행능력(CPU 파워)이 필요할때 사용한다.
- 데이터의 일괄처리, 머신러닝, 전용 게임서버 등  
- 보통 instance class가 `C`이다.

<br />

**`Memory Optimized`**  
- 메모리(RAM)에서 대규모 데이터셋을 처리하는 유형의 작업
- 고성능의 데이터베이스, BI, 비정형 데이터를 실시간으로 처리하는 어플
- 보통 instance class가 RAM을 뜻하는 `R`(예외로 `X1` 등도 있음) 이다.  

<br />

**`Storage Optimized`**   
- 로컬 스토리지에서 대규모의 데이터셋에 액세스할 때 적합한 인스턴스
- OLTP 시스템, RDS, NoSQL, Redis, Data warehouse 어플, 분산 파일 시스템
- 보통 instance class가 `I`, `G`, `H1` 이다.  

[인스턴스 비교 사이트](https://instances.vantage.sh/)
[공식문서 링크](https://aws.amazon.com/ko/ec2/instance-types/)

<br />  

### Security Group
Security Group(보안 그룹)은 EC2의 방화벽이라고 할 수 있다.  
- 네트워크 보안의 핵심이다.  
- EC2 인스턴스로 들어오고 나가는 트래픽을 제어할 수 있다.
  - IP, 포트, Protocol을 이용하여 통제한다.
  - 허용 규칙만을 작성한다.
  - 인바운드(외부 -> EC2), 아웃바운드(EC2 -> 외부) 규칙을 따로 지정할 수 있다.
  - 아웃바운드는 기본적으로 모든 트래픽을 허용한다.
  - 인바운드는 기본적으로 모든 트래픽을 차단한다.
- IP 주소, 다른 보안 규칙을 참조해 규칙을 만든다.  

<br />

**`Security Group의 특징`**  
- 하나의 보안그룹을 여러 인스턴스에 적용할 수 있으며 그 반대도 가능하다.
- 보안그룹은 **Region과 VPC에 종속**되어 있다.  
- **보안그룹은 EC2 외부에 있다.**(즉, 트래픽이 차단되면 EC2에서 로그를 확인할 수 없다.)  

<br />

**`Security Group ++`**  
- SSH 액세스를 위해 하나의 별도 보안 그룹을 유지하는 것이 좋다.  
- 타임아웃, 무한 대기와 같은 문제가 발생하면 보안그룹때문에 발생하는 것이다  
- **연결 거부 문제는 보안그룹과 관련된 문제는 아니다.**  

<br />

> **💡 보안그룹의 다른 보안그룹 참조**  
보안그룹이 인바운드 규칙으로 다른 보안그룹을 허용한다면  
해당 보안그룹을 가진 인스턴스들은 모두 접근가능하다(IP를 허용하지 않았어도!)  

<br />

### SSH  
SSH(Secure Shell) 명령줄 인터페이스 도구로 원격머신이나 서버를 Cli를 사용하여 제어할 수 있는 방법이다.  
즉, 우리의 컴퓨터에서 EC2로 원격접속을 할 수 있는 방법이다.  
SSH로 원격접속을 하기 위해선 대상이 되는 호스트의 IP와 접속을 위한 Key가 필요하다.  

<br />

> **💡 SSH 접근 시 Tip!**  
보안그룹의 인바운드 규칙에 SSH가 허용되어 있어야하며 접속하는 위치의 IP도 등록되어 있어야한다.  
뿐만아니라 AWS 콘솔에서 SSH접속을 위해 다운 받은 키(.pem)는 파일권한이 644로 굉장히 열려있다. 400으로 바꿔줘야 정상적으로 사용가능하다.  
`ssh -i {key 파일} {ec2-user}@{IP}` 명령어로 접속가능하다. @ 앞은 사용자이름이다. `ec2-user`는 Amazon Linux2의 루트 사용자명이다.  

<br />  

### EC2를 위한 IAM Role 적용해보기
EC2 인스턴스 내부에서 aws configure을 통해 상세 개인정보를 입력해두면 이 계정상의 누구라도 EC2 인스턴스 커넥트 등을 통해 접속할 수 있다.  
이때 IAM Role을 사용할 수 있다.  
역할을 만들고 `IAMReadOnlyAccess` 정책을 부여한다 -> EC2의 Security에서 해당 Role을 부여한다면 EC2 내부에서 aws cli를 이용해볼 수 있다.  

[IAM 공부하러 가기](https://velog.io/@rokwon_k/AWS-IAM-%EC%84%9C%EB%B9%84%EC%8A%A4)  

<br />  

### EC2의 장점  
사실상 클라우드를 사용하는 이유와 같다.  
직접 하드웨어를 구매하고 소프트웨어와 필요한 구성을 셋팅하는데 오랜 시간이 걸릴 것이다.  
또한 하드웨어를 사양을 바꾸게 된다면 같은 복잡한 절차와 비용또한 2배 이상을 소비할게 될 것이다. 
EC2는 하드웨어 구비, 소프트웨어 설치와 같은 시간을 비약적으로 줄여주며 사양 교체또한 매우 유연하다.  

<br /><hr><br />  

## EC2 구매 옵션
EC2 Instance를 운용하는데 다양한 옵션이 존재한다. 어떤 옵션을 선택하느냐에따라 운용가능한 시간, 가격이 달라진다.  
종류로는 `On-demand`, `Reserved`, `Spot`, `Dedicated`, `Dedicate`가 존재한다.  

<br />  

### EC2 On-Demand Instance
- 사용한 만큼 지불한다는 특징이 있다.(Linux, Window 머신은 비용이 초당으로 지불됨. 다른 OS는 시간당으로 청구됨)  
- 가격은 높지만 선결제나, 장기 약정이 없음. 개발자 마음대로 생성, 삭제가 가능하다.  
- 어플의 작동 방식을 예측할 수 없는 단기 작업을 실행할 경우 적합하다.  

<br />  

### EC2 Reserved Instance  
Reserved Instance는 내부에 다시 3가지 형태로 나뉜다.  

<br />

**`Standard Reserved Instance`**
- On-Demand와 비교하면 최대 75%의 비용을 절약할 수 있다.  
- 예약 기간이 있어 1년이나 3년(할인율 더 큼) 중에서 선택할 수 있다.  
- 또한 선결제 방식을 택할경우 더 큰 할인을 받을 수 있다.  
- 특정한 타입을 선택해야한다.  
- 애플이 안정된 상태로 운용해야하는 데이터베이스같은 곳에 사용할 수 있다.  

<br />

**`Convertible Reserved Instance`**
- 마찬가지로 1년 또는 3년 계약
- 계약 도중 EC2 타입을 변경할 수 있다.(유연함)  
- 대신 할인율은 Reserved Instance에 비해 낮다.(최대 54%)  

<br />

**`Scheduled Reserved Instance`**
- 특정한 시간대에 인스턴스 실행
- 1,2,3년 단위로 계약한다.  
- (현재는 사용하지 않는다)  

<br />  

### EC2 Spot Instance
가장 할인율이 높은 옵션이다.(약 90%) '지불하고자 하는 시간당 최고 가격'으로 인스턴스를 빌릴 수 있다. 지정한 가격보다 더 높아진다면 Spot Instance는 회수당한다는 단점이 존재한다. 이 때문에 중간이 작업이 중단되어도 문제가 없는 작업, 1~6시간의 워크로드를 다룰시에만 사용하는 것이 효율적이다. (ex. 단발성 데이터분석, 이미지 프로세싱, 분산된 작업방식)  
Spot은 block과 fleets 으로 나눌 수 있다.

<br />  

**`스팟 블록`**  
- 1~6시간 동안 예약하여 사용하는 방식이다.
- 이 방식은 중간에 회수당하지 않는다는 장점이 있다. 아주 드물게 용량 요구로 인해서 중단될 수 있다.
- 종료되기 2분 전에 종료 알림을 보내준다.

<br />

**`스팟 플릿`**
- '지불하고자 하는 시간당 최고 가격'을 지정하여 인스턴스를 빌린다
- 사용하고자 하는 인스턴스 타입, 갯수 요구사항 등을 지정할 수 있다
- 항상 지정한 용량을 유지하고자 한다.(인스턴스가 종료되면 용량을 채우기위해 새로운 인스턴스를 자동 재요청 한다는 뜻)
- 정해진 예산, 원하는 용량에 도달하면 인스턴스 실행을 멈춤

<br />  

> **💡 스팟 할당전략**  
lowestPrice : 가장 비용이 저렴한 런치풀로 인스턴스를 실행한다.  
diversified : 정의한 런치풀에 걸쳐 분산됨. 가용성이 좋음  
capacityOptimized : 인스턴스의 개수에 따라 최적 용량으로 실행됨. 적절한 풀을 찾아주는 옵션  

<br />  

> **💡 스팟 인스턴스의 종료**  
스팟 플릿은 수동으로 인스턴스를 종료하더라도 인스턴스를 자동재요청한다. 따라서 스팟 재요청을 취소한 다음 인스턴스를 종료시켜야한다. 

<br />  

### EC2 Dedicated

**`Dedicated Hosts`**
- 물리적 서버 전체를 예약하고 인스턴스 배치를 제어한다.
- 데이터 센터 내 하나의 서버 전체를 임대한다는 것
- 가장 비싼 EC2 구매옵션
- 어려운 규정 준수요건과 복잡한 서버 결합 소프트웨어 라이센스 조건을 만족시켜줄 수 있다는 장점이 있다.
- 계약 기간은 3년

<br />  

**`Dedicated Instance`**
- 사용자의 전용 하드웨어에서 실행되는 EC2 인스턴스

<br /><hr><br />  

## EC2 ++

공공IP vs 사설IP  
본래 EC2 공용 IP는 바뀜. EIP를 이용해서 고정 IP로 사용할 수 있음.  
5개만 쓸 수 있음. 증가 요청은 가능  
하지만 좋지 못한 구조라고 함. 임의의 공용 IP를 서서 DNS 이름을 할당하는 것이 좋음  

<br />  

### Placement Groups(배치 그룹)  
EC2 instance가 AWS 인프라에 배치되는 방식을 제어하고자 할때 씀  

세가지 전략이 있다.  
클러스터 : 단일 가용영역 내에서 지연 시간이 짧은 클러스터 인스턴스  
스프레드(분산 배치 그룹) : 인스턴스가 다른 하드웨어에 분산됨(가용영역별 최대 7개 인스턴스 가능) - 크리티컬 어플이 있을경우 사용  
분할 배치 그룹 : 인스턴스를 분산 여러 파티션에 인스턴스가 분할되어 있음. 가용 영역 내의 다양한 하드웨어 랙 세트에 의존함  

<br />  

**`Cluster`**
모든 EC2 인스턴스가 단일 가용영역, 동일한 하드웨어에 존재함
- 지연 시간이 짧음
- 하드웨어에 문제가 생기면 모든 EC2에 문제가 생김
- 빅데이터 작업, 높은 네트워크 처리  

<br />  

**`Spread`**  
여러 가용영역에 걸쳐 모든 EC2가 다른 하드웨어에 위치한다. 
- 여러 가용역역에 걸쳐 있어 가용성이 좋음
- 가용영역당 EC2 최대 7개로 제한됨 - 대규모 어플리케이션에는 부적합함  
- 위험을 줄여야하는 어플에 좋음, 크리티컬 어플리케이션  

<br />  

**`Partition`**  
하나의 가용영역을 파티션으로 나누어 파티션마다 인스턴스들을 분산시킨다.  
- 각 파티션은 AWS의 렉(하드웨어)을 의미 - 하드웨어 문제에 대해 안전함  
- 최대 수백개의 인스턴스 가능
- 데이터와 서버를 퍼뜨려 두어야할때 사용 - HDFS, HBase, Cassandra, Kafka  

<br />  

![placement Groups](https://user-images.githubusercontent.com/52196792/209921585-ecf7e230-ff06-4b6d-b245-6fd5c70d38ef.png)  

### Elastic Network Interfaces(ENI)  
탄력적 네트워크 인터페이스, VPC의 논리적 구성 요소이며 가상 네트워크 카드를 나타냄.  
- EC2 인스턴스가 네트워크(사설)에 액세스할 수 있게 해줌.(ENI는 EC2 외부에서도 사용됨)  
- 주요 사설 IP와 하나이상의 보조 IPv4를 가지고 있다  
- 하나의 공용 IP를 가질 수 있다
- 하나 이상의 보안 그룹을 연결할 수 있다
- 맥 주소를 연결할 수도 있다  
- 가용영역에 바인딩된다.  
- ENI는 EC2에 붙일 수도 있지만 독립적으로도 존재할 수 있다  
- 인스턴스에 문제가 생겼을때 IP를 가진 ENI가 다른 인스턴스로 연결시킬 수 있다.  

ENI를 제어해서 EC2 인스턴스에서 다른 인스턴스로 이동시킬 수 있음(간편한 네트워크 장애 조치)  

<br />  

### EC2 Hibernate(절전모드)  
인스턴스를 중지하면 disk(EBS)가 다음 시작때까지 유지됨
종료하면 볼륨삭제됨  
절전모드라는 새로운 상태 RAM에 앴던 메모리가 그대로 남겨짐 -> 재부팅속도향상  
백그라운드에서 루트경로의 EBS볼륨에 RAM의 상태를 남기기 때문
- EBS는 암호화되어 있어야하고 용량도 충분해야함  
- EC2 인스턴스 RAM은 150GB 미만이어야함

순서  
1. EC2 중지
2. RAM 내용을 EBS 볼륨에 덤프
3. RAM 사라짐(인스턴스 종료)
4. 재실행시 디스크에서 RAM을 불러옴  

빠른 재부팅이 필요할때 사용

최대 60일까지 사용가능, On-Demand, Reserved, Spot Instance 모두 사용가능하고 여러 인스턴스 타입을 지원한다.  

EC2 인스턴스의 Advanced details 'Stop-Hibernate behavior'에서 설정 활성화시키는 것  
- EBS 볼륨 암호화, 용량 확인 필수!  

<br />  

### EC2 Instanc Metadata
EC2인스턴스의 정보를 얻을 수 있음(Userdata랑 다른 것임!)  
ec2내에서 `curl http://169.254.169.254/latest/meta-data` 입력시 확인가능  
hostname, ami-id, public ip 등을 알아낼 수 있다.  



<br /><hr><br />  

## EC2 인스턴스 스토리지  

### EBS Volume  
Elasstic Block Store의 약자  
네트워크 드라이브  
인스턴스 종류 후에도 데이터 지속 가능  
하나의 인스턴스에 여러 EBS 연결가능
특정 가용 영역에서만 가능(스냅샷을 이용해 다른 AZ에도 연결가능!)  

네트워크 USB 스틱이다.(네트워크를 통해 연결됨) 즉, 통신을 위해 네트워크가 필요함  

EBS 종료시 삭제 옵션이 있음 - 인스턴스 종료시 삭제  

<br />  

### EBS Snapshots  
- EBS 볼륨의 특정 시점에 대한 백엄  
- 다른 가용영역이나 다른 리전에 복사 가능!

EBS Snapshots의 기능
- Archive
  - 75%나 저렴한 스탭샷을 archieve tier로 옮기는 것
  - 아카이브를 회복시킬때 24~72시간 걸림(즉시 복원 X)
- 휴지통
  - 스냅샷 삭제시 영구삭제하는 대신 휴지통에 넣는 것
  - 실수로 삭제하는ㄱ ㅕㅇ우 휴지통 복원가능 보관괴능은 1일에서 1년 사이로 설정 가능
- FSR(Fast Snapshot Restore)  
  - 스냅샷을 완전 초기화해 첫 사용에서의 지연시간을 없애는 기능
  - 스냅샷이 아주 크고 볼륨 또는 인스턴스를 빠르게 복원할때 필요
  - 비용이 많이 듬  

<br />  

### AMI  
아마존 머신 이미지  
OS 정의 및 설정(소프트웨어 설치, 방화벽 등)한 이미지 **부팅이 사전에 이미 패키징 되기때문에 빠름!**  
원하는 리전에 등록해놓기!(리전에 국한)  
AWS 마켓플레이스에서 살 수도 있음  

AMI process
1. EC2 시작하고 customize 하기
2. EC2 Instance 이미지화 시켜서 AMI로 만들기
2. 인스턴스 중지, 무결성 입증을 위해
3. AMI build - EBS 스냅샷이 만들어짐

<br />  

### EC2 Instance Store  
- 더 높은 성능을 요구할때 하드웨어 디스크 성능이 향상되어야함
- 물리적으로 연결된 디스크를 가진다 이것이 인스턴스 스토어(연결된 하드웨어 드라이브)  
- I/O 성능 향상  
- 중지, 종료 시 해당 스토리지 또한 삭제됨(임시 스토리지)  
- 버퍼나 캐시, 스크래치 데이터, 임시 콘텐츠 등에 사용하기 좋음
- 파일 손실이 나지 않을려며 데이터 백업이나 복제가 필요함  

<br />  

### EBS 볼륨유형  
총 여섯개의 유형이 있음
gp2/gp3
- SSD 볼륨
- 다양한 워크로드에 대해 가격과 성능의 절충안

io1/io2
- 성능 좋은 SSD 볼륨
- 낮은 지연시강 높은 퍼포먼스의 작업에 효율적

st1 
- 저비용 HDD
- 낮은 접근 처리량이 많은 것

sc1
- 가장 낮은 비용의 HDD
- 접근 빈도가 낮은 워크로드를 위해 설계됨  


유형은 어떻게 나누어지는가? - 크기, 처리량, IOPS(초당 I/O 작업 처리량)  
인스턴스 볼륨으로는 gp2/gp3, io1/io2만 부팅 볼륨으로 사용가능  

General Purpose SSD
- 효율적인 비용, 낮은 지연시간
- 가상 머신, 개발/테스트환경에 쓰이기 좋음
- 1GB ~ 16TB까지가능
- gp3 
  - 최신 세대의 볼륨 3,000 IOPS와 125 MiB/s 처리량
  - 1600 과 1000 MiB/s 까지 증가시킬 수 있음 
  - 처리량과 IOPS를 독자적으로 설정할 수 있다는 특징이 있음 
- gp2
  - 볼륨이 작음 3,000 IOPS와 125 MiB/s 처리량
  - 볼륨과 IOPS가 연결되어있음 - max IOPS는 16000


Provisioned IOPS  
- IOPS 성능을 유지할 필요가 있는 주요 비즈니스 앱, 16000 이상을 요하는 앱
- 스토리지가 많이 들때
- 4 gib ~ 16tib
  - Nitro EC2 인스턴스에서는 최대 64000 IOPS까지 가능함
  - 아닌 경우 32000까지 가능
  - io2는 동일한 비용으로 내구성과 기가 당 IOPS의 수가 더 높음
- io2 Block Express (4gib ~ 64tib)  
  - 좀 더 고성능
  - IOPS 대 GB 비율이 1000 : 1일 때 256000

Hard disk Drives
  - 부팅 볼륨이 될 수 없음
  - 최대 16TB
  - st1
    - 빅데이터, 데이터 웨어하우스, 로그 처리에 적합
    - 최대 처리량은 초당 500MB, IOPS는 500
  - sc1
    - 아카이브 데이터용
    - 250, 250

<br />  

### EBS Multi-Attach
오직 io1/io2 family만 가능  
같은 EBS 볼륨을 여러 EC2(동일 AZ)에 연결하는 것  
모두 읽고 쓰고 할 수 있음
가용성을 높이기 위해 동시 쓰기 작업을 관리해야할때 사용  
**한 번에 16개의 인스턴스**만 같은 볼륨에 연결할 수 있음  
반드시 클러스터 인식 파일시스템만 사용해야함(XFS, EX4는 안됨)  

<br />  

### EBS 암호화  
암호화 볼륨을 만들면 일어나는 일
- 저장 데이터가 볼륨 내부에 암호화됨
- 인스턴스와 볼륨간의 전송 데이터 역시 암호화됨
- 스냅샷 뿐만아니라 모든 복제가 암호화됨
- 이때 암호화 및 복호화 매커니즘은 보이지 않게 처리됨(백그라운드에서 알아서 처리함)
- 지연시간에 영향이 거의 없음
- KMS에서 암호화 키를 생성/이용해 AES-256 암호화 표준을 갖는다 - 복사된 스냅샷도 암호화시킴

암호화 되지 않은 볼륨 암호화
- 스냅샷 생성
- 스냅샷 복사후 암호화하는 옵션을 체크
- 암호화된 스냅샷으로 새로운 볼륨생성
- 인스턴스와 연결

<br />  

### EFS
Elastic File System  
- 네트워크 파일 시스템임 EC2 마운트 가능(여러 가용영역에 있어도 문제없음)
- 가격도 비쌈
- 보안그룹이 둘러싸고 있음 여러 가용역에 펼쳐져 있는 인스턴스가 같은 네트워크 파일 시스템을 사용할 수 있음
- 웹서빙, 데이터 공유 등에 사용
- 내부적으로 NFS 프로토콜을 사용함  
- Linux랑만 호환가능 (POSIX 시스템)
- KMS를 이용하여 암호화 가능  
- 미리 용량을 계획하지 않아도 됨  

성능 속성
- 수천개의 NFS Client에서 EFS에 동시 액세스할 수 있게 확장가능 초당 10GB
- 성능모드선택
  - 범용모드 : 웹서버, CMS에 사용(지연시간에 민감한 것들)
  - Max I/O : I/O 최대화 지연시간, 처리량, 병렬 처리 성능, 빅데이터, 미디어 처리
- 처리량모드선택
  - 버스팅모드: 기본 초당 100MiB까지
  - 프로비젼드: 스토리지 크기에 상관없이 처리량을 설정 가능


Storage Classes(스로티리 클래스) 속성
- Stroage Tiers 선택
  - 일정 기간 후에 파일을 다른 계층으로 옮기는 기능
  - Standard(자중 사용하는 파일), EFS-IA(파일을 검색할 경우 검색에대한 비용 발생, 파일저장 비용은 낮음, 수명주기 정책을 설정해 관리)
- Availability and durability 선택
  - Standard(EFS를 다중 AZ로 설정), One Zone(개발할때 좋음, 백업 활성화, EFS-IA와 호환 - 비용 90%할인 가능)  



EBS
- 오직 인스턴스 하나
- 특정 가용영역
- gp2 : 디스크가 늘어나면 IO 증가
- io1 : 크기와 IO가 독립적
- AZ 옮길려면 스냅샷이용 
- 스냅샷이나 백업을 만들때 IO를 전부사용하니 EBS가 사용중이 아닐대 실행해야함
- EC2 중지시 루트 ㄷEBS는 자동종료(체크해제할 수도 있음)
- 지정한 볼륨 크기로 비용이 나옴

EFS
- 여러개의 가용영역에 많은 인스턴스 연결가능
- 사용한 만큼 나옴