# JWT
json web token으로 인증 방식 중 하나이다.  
인증이란게 필요한 이유는 Client가 어떠한 일을 할때( ex) 페이지 보여주기 ), 허락된 사용자에게만 페이지를 보여주기 위해서 필요한 것이다.  

<br>

인증을 하는 방법은 많다. 그 중에서, 많이 쓰이는 방법은  

### `쿠키/세션 방식이다`  

쿠키 => 사용자 인증을 위한 부분  
세션 => 쿠키의 값을 암호화한 것(보안을 위해서)  

1. 로그인을 함(정보를 서버에 보냄)
2. 서버는 사용자 확인 후  
    - 고유한 id(암호화한)를 부여
    - => 세션 저장소에 '(암호화된 id)' : '인증값'로 만듬
    - => 암호화된 id를 쿠키에 저장 후 client 보낸다.
    - => client는 인증이 필요할 때마다 헤더에 이 쿠키를 보냄
    - => 쿠키의 값으로 인증값이 있는지 확인해 있다면 인증된 사용자로 판별해 요청에 대한 응답을 보냄.

이 방식은 꽤나 보안이 괜찮지만 서버에서 세션 저장소를 사용하면서 많아질수록 부하가 커진다.

<br>

서버의 부하를 줄이고 더 나은 보안을 위해 나온 것이  
### `JWT - 토큰 기반 인증 방식이다`

1. 로그인을 함
2. 사용자 계정정보로 사용자 확인 후
    - payload를 만들어 사용자 개인정보를 넣음 =>
    - JWT(accesstoken, refreshtoken) 암호화하고 만들어 유효기간 설정 =>
    - JWT를 보냄
3. JWT 받아 저장 인증이 필요시 마다 헤더에 실어 보냄
4. 서버에서 acceestoken를 복호화 => 맞는 payload의 사용자 개인정보를 가져와서 요청들을 처리함

물론 여기서도 보안문제가 있음. => accesstoken을 훔치면 개인정보에 접근가능.
- so, payload에 저장되는 정보에 비밀번호 같은건 빠져있음.
- accesstoken의 유효기간을 설정함. 보통 1시간
    - refreshtoken을 이용해 토큰 재발급 가능 이것또한 훔치기 가능
    - so, 이것도 유효기간이 있음.
